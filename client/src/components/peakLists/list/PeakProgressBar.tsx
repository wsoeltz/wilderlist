/* tslint:disable:max-line-length */
import React from 'react';
import styled from 'styled-components/macro';
import { colorSetGray, getColorSetFromVariant } from '../../../styling/styleUtils';
import { PeakListVariants } from '../../../types/graphQLTypes';

const clipPathId = 'progress-bar-percent-clip-path-';

const Root = styled.div`
  position: relative;
  height: 100%;
`;

const SvgBase = styled.svg`
  position: absolute;
  bottom: 0;
  transition: all 0.2s ease-in-out;

  rect {
    transition: all 0.2s ease-in-out;
  }

  .${clipPathId}background {
    opacity: 0.3;
    transition: all 0.2s ease-in-out;
  }
  .${clipPathId}foreground {
    transition: all 0.2s ease-in-out;
  }
`;

interface Props {
  variant: PeakListVariants | null;
  completed: number;
  total: number;
  id: string;
}

const PeakProgressBar = (props: Props) => {
  const { id, total, completed, variant } = props;
  const percentage = (completed / total) * 100;
  const colorSet = variant === null ? colorSetGray : getColorSetFromVariant(variant);
  return (
    <Root>
      <SvgBase version='1.1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px'
         viewBox='0 0 545 29.8'>
        <defs>
          <clipPath id={`${clipPathId}${id}`}>
            <rect x='0' y='0' width={`${percentage}%`} height='100%'></rect>
          </clipPath>
        </defs>
        <g className={`${clipPathId}background`}>
          <g style={{fill: colorSet.secondary}}>
            <polygon points='66.7,22.6 58.1,17.6 56.7,23.7 42.6,11.2 25.8,21.4 18.7,16.9 5.6,28.8 83.7,28.8 72.8,21.1'/>
            <polygon points='265.8,11.9 261.2,13.2 249.5,4.5 230,21 239.8,28.8 258.3,28.8 269.5,19'/>
            <polygon points='167.8,22.6 159.2,17.6 157.7,23.7 143.7,14.1 130.8,19.6 131.5,20.1 136.6,18.5 152,28.8 184.7,28.8
              173.9,21.1'/>
            <polygon points='472.7,22.2 456.2,13 446.1,20.1 440.9,18.8 435.7,22.2 445.5,28.8 492.6,28.8 479.7,18.2'/>
            <polygon points='223.5,18.2 216.5,22.2 199.9,13 189.9,20.1 184.7,18.8 179.4,22.2 189.2,28.8 236.3,28.8'/>
            <polygon points='106.5,5.6 88.6,18.5 78.1,22.1 88.1,28.8 147.5,28.8 136.7,21.1 130.6,22.6'/>
            <polygon points='323,22.6 314.4,17.6 312.9,23.7 298.9,11.2 282,21.4 274.9,16.9 261.8,28.8 339.9,28.8 329.1,21.1'/>
            <polygon points='527.5,22.7 522.1,11.9 517.5,13.2 505.7,4.5 486.3,21 496.1,28.8 539.1,28.8'/>
            <polygon points='362.8,5.6 344.8,18.5 334.4,22.1 344.4,28.8 403.8,28.8 393,21.1 386.9,22.6'/>
            <polygon points='424.1,22.6 415.5,17.6 414,23.7 399.9,14.1 387,19.6 387.8,20.1 392.8,18.5 408.3,28.8 441,28.8
              430.2,21.1'/>
          </g>
          <polygon
            style={{fill: colorSet.primary}}
            points='527.4,17.3 522.5,8.7 517.1,9.7 505.6,1.1 484.5,19.6 480.2,16.2 472.9,19.6 456.1,9.7 445.9,17.9 439.9,17.1 432.8,20.3 430,18.5 424,19.5 416.5,15.7 410.4,16.6 400.1,10.5 384.4,17.8 362.8,2.8 345.5,15.6 332.8,21 329,18.5 322.9,19.5 315.4,15.7 309.3,16.6 299,7.5 281.8,18.5 274.4,14.8 271.5,17.3 266.2,8.7 260.8,9.7 249.3,1.1 228.2,19.6 224,16.2 216.7,19.6 199.8,9.7 189.7,17.9 183.6,17.1 176.5,20.3 173.8,18.5 167.7,19.5 160.2,15.7 154.1,16.6 143.8,10.5 128.1,17.8 106.5,2.8 89.2,15.6 76.5,21 72.7,18.5 66.7,19.5 59.2,15.7 53,16.6 42.7,7.5 25.6,18.5 18.1,14.8 2,28.8 5.2,29.1 18.7,16.9 25.8,21.4 42.6,11.2 56.7,23.7 58.1,17.6 66.7,22.6 72.8,21.1 84.7,29.5 89.2,29.5 78.1,22.1 88.6,18.5 106.5,5.6 130.6,22.6 136.7,21.1 148.6,29.5 153.1,29.5 136.6,18.5 131.5,20.1 130.8,19.6 143.7,14.1 157.7,23.7 159.2,17.6 167.8,22.6 173.9,21.1 185.7,29.5 190.3,29.5 179.4,22.2 184.7,18.8 189.9,20.1 199.9,13 216.5,22.2 223.5,18.2 236.7,29.1 239.8,28.8 230,21 249.5,4.5 261.2,13.2 265.8,11.9 269.5,19 258.3,28.8 261.5,29.1 274.9,16.9 282,21.4 298.9,11.2 312.9,23.7 314.4,17.6 323,22.6 329.1,21.1 340.9,29.5 345.5,29.5 334.4,22.1 344.8,18.5 362.8,5.6 386.9,22.6 393,21.1 404.8,29.5 409.4,29.5 392.8,18.5 387.8,20.1 387,19.6 399.9,14.1 414,23.7 415.5,17.6 424.1,22.6 430.2,21.1 442,29.5 446.6,29.5 435.7,22.2 440.9,18.8 446.1,20.1 456.2,13 472.7,22.2 479.7,18.2 492.9,29.1 496.1,28.8 486.3,21 505.7,4.5 517.5,13.2 522.1,11.9 527.5,22.7 540.5,29.5 545,29.5 '
          />
        </g>
        <g className={`${clipPathId}foreground`} clipPath={`url(#${clipPathId}${id})`}>
          <g style={{fill: colorSet.secondary}}>
            <polygon points='66.7,22.6 58.1,17.6 56.7,23.7 42.6,11.2 25.8,21.4 18.7,16.9 5.6,28.8 83.7,28.8 72.8,21.1'/>
            <polygon points='265.8,11.9 261.2,13.2 249.5,4.5 230,21 239.8,28.8 258.3,28.8 269.5,19'/>
            <polygon points='167.8,22.6 159.2,17.6 157.7,23.7 143.7,14.1 130.8,19.6 131.5,20.1 136.6,18.5 152,28.8 184.7,28.8
              173.9,21.1'/>
            <polygon points='472.7,22.2 456.2,13 446.1,20.1 440.9,18.8 435.7,22.2 445.5,28.8 492.6,28.8 479.7,18.2'/>
            <polygon points='223.5,18.2 216.5,22.2 199.9,13 189.9,20.1 184.7,18.8 179.4,22.2 189.2,28.8 236.3,28.8'/>
            <polygon points='106.5,5.6 88.6,18.5 78.1,22.1 88.1,28.8 147.5,28.8 136.7,21.1 130.6,22.6'/>
            <polygon points='323,22.6 314.4,17.6 312.9,23.7 298.9,11.2 282,21.4 274.9,16.9 261.8,28.8 339.9,28.8 329.1,21.1'/>
            <polygon points='527.5,22.7 522.1,11.9 517.5,13.2 505.7,4.5 486.3,21 496.1,28.8 539.1,28.8'/>
            <polygon points='362.8,5.6 344.8,18.5 334.4,22.1 344.4,28.8 403.8,28.8 393,21.1 386.9,22.6'/>
            <polygon points='424.1,22.6 415.5,17.6 414,23.7 399.9,14.1 387,19.6 387.8,20.1 392.8,18.5 408.3,28.8 441,28.8
              430.2,21.1'/>
          </g>
          <polygon
            style={{fill: colorSet.primary}}
            points='527.4,17.3 522.5,8.7 517.1,9.7 505.6,1.1 484.5,19.6 480.2,16.2 472.9,19.6 456.1,9.7 445.9,17.9 439.9,17.1 432.8,20.3 430,18.5 424,19.5 416.5,15.7 410.4,16.6 400.1,10.5 384.4,17.8 362.8,2.8 345.5,15.6 332.8,21 329,18.5 322.9,19.5 315.4,15.7 309.3,16.6 299,7.5 281.8,18.5 274.4,14.8 271.5,17.3 266.2,8.7 260.8,9.7 249.3,1.1 228.2,19.6 224,16.2 216.7,19.6 199.8,9.7 189.7,17.9 183.6,17.1 176.5,20.3 173.8,18.5 167.7,19.5 160.2,15.7 154.1,16.6 143.8,10.5 128.1,17.8 106.5,2.8 89.2,15.6 76.5,21 72.7,18.5 66.7,19.5 59.2,15.7 53,16.6 42.7,7.5 25.6,18.5 18.1,14.8 2,28.8 5.2,29.1 18.7,16.9 25.8,21.4 42.6,11.2 56.7,23.7 58.1,17.6 66.7,22.6 72.8,21.1 84.7,29.5 89.2,29.5 78.1,22.1 88.6,18.5 106.5,5.6 130.6,22.6 136.7,21.1 148.6,29.5 153.1,29.5 136.6,18.5 131.5,20.1 130.8,19.6 143.7,14.1 157.7,23.7 159.2,17.6 167.8,22.6 173.9,21.1 185.7,29.5 190.3,29.5 179.4,22.2 184.7,18.8 189.9,20.1 199.9,13 216.5,22.2 223.5,18.2 236.7,29.1 239.8,28.8 230,21 249.5,4.5 261.2,13.2 265.8,11.9 269.5,19 258.3,28.8 261.5,29.1 274.9,16.9 282,21.4 298.9,11.2 312.9,23.7 314.4,17.6 323,22.6 329.1,21.1 340.9,29.5 345.5,29.5 334.4,22.1 344.8,18.5 362.8,5.6 386.9,22.6 393,21.1 404.8,29.5 409.4,29.5 392.8,18.5 387.8,20.1 387,19.6 399.9,14.1 414,23.7 415.5,17.6 424.1,22.6 430.2,21.1 442,29.5 446.6,29.5 435.7,22.2 440.9,18.8 446.1,20.1 456.2,13 472.7,22.2 479.7,18.2 492.9,29.1 496.1,28.8 486.3,21 505.7,4.5 517.5,13.2 522.1,11.9 527.5,22.7 540.5,29.5 545,29.5 '
          />
        </g>
      </SvgBase>
    </Root>
  );
};

export default PeakProgressBar;
